<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Wyceny Ciƒôcia Laserowego - TEKIO S3015T3</title>
    <style>
        :root {
            --color-primary: #21808d;
            --color-primary-hover: #1d7480;
            --color-background: #fcfcf9;
            --color-surface: #fffffe;
            --color-text: #133434;
            --color-text-secondary: #626c71;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-success: #21808d;
            --color-card-border: rgba(94, 82, 64, 0.12);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: #1f2121;
                --color-surface: #262828;
                --color-text: #f5f5f5;
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-primary: #32b8c6;
                --color-primary-hover: #2da6b2;
                --color-card-border: rgba(119, 124, 124, 0.2);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--color-background);
            color: var(--color-text);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 8px;
            color: var(--color-text);
        }

        .subtitle {
            color: var(--color-text-secondary);
            margin-bottom: 30px;
            font-size: 14px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .card h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--color-text);
            border-bottom: 2px solid var(--color-primary);
            padding-bottom: 8px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            font-size: 13px;
            color: var(--color-text);
        }

        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 14px;
            background: var(--color-surface);
            color: var(--color-text);
            transition: border-color 0.2s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 8px;
            margin-bottom: 16px;
        }

        .preset-btn {
            padding: 10px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            color: var(--color-text);
        }

        .preset-btn:hover {
            border-color: var(--color-primary);
            background: rgba(33, 128, 141, 0.05);
        }

        .preset-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--color-border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .result-value {
            font-weight: 600;
            font-size: 16px;
            color: var(--color-text);
        }

        .total {
            background: linear-gradient(135deg, var(--color-primary), #1d7480);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            text-align: center;
        }

        .total h3 {
            font-size: 16px;
            margin-bottom: 8px;
            opacity: 0.9;
        }

        .total .amount {
            font-size: 36px;
            font-weight: 700;
        }

        .buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s;
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .btn-secondary {
            background: var(--color-surface);
            color: var(--color-text);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: rgba(33, 128, 141, 0.05);
        }

        .info-box {
            background: rgba(33, 128, 141, 0.1);
            border-left: 4px solid var(--color-primary);
            padding: 12px;
            border-radius: 6px;
            margin-top: 16px;
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        @media print {
            .buttons, .preset-buttons {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Kalkulator Wyceny Ciƒôcia Laserowego</h1>
        <p class="subtitle">TEKIO S3015T3 (2 kW Fiber Laser) - Wersja rozszerzona z kalkulacjƒÖ materia≈Çu</p>

        <div class="grid">
            <!-- Materia≈Ç i parametry -->
            <div class="card">
                <h2>üìã Materia≈Ç i Wymiary</h2>
                
                <div class="form-group">
                    <label>Typ materia≈Çu</label>
                    <div class="preset-buttons">
                        <button class="preset-btn active" onclick="setMaterial('steel')">Stal wƒôglowa</button>
                        <button class="preset-btn" onclick="setMaterial('stainless')">Nierdzewna</button>
                        <button class="preset-btn" onclick="setMaterial('aluminum')">Aluminium</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Grubo≈õƒá blachy (mm)</label>
                    <select id="thickness" onchange="calculate()">
                        <option value="0.5">0.5 mm</option>
                        <option value="0.8">0.8 mm</option>
                        <option value="1">1.0 mm</option>
                        <option value="1.5">1.5 mm</option>
                        <option value="2" selected>2.0 mm</option>
                        <option value="2.5">2.5 mm</option>
                        <option value="3">3.0 mm</option>
                        <option value="4">4.0 mm</option>
                        <option value="5">5.0 mm</option>
                        <option value="6">6.0 mm</option>
                        <option value="8">8.0 mm</option>
                        <option value="10">10.0 mm</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Wymiar arkusza (mm)</label>
                    <select id="sheetSize" onchange="calculate()">
                        <option value="1000x2000">1000 √ó 2000 mm</option>
                        <option value="1250x2500" selected>1250 √ó 2500 mm</option>
                        <option value="1500x3000">1500 √ó 3000 mm</option>
                        <option value="2000x4000">2000 √ó 4000 mm</option>
                        <option value="custom">Niestandardowy</option>
                    </select>
                </div>

                <div id="customSizeInputs" style="display: none;">
                    <div class="form-group">
                        <label>Szeroko≈õƒá (mm)</label>
                        <input type="number" id="customWidth" value="1250" min="0" onchange="calculate()">
                    </div>
                    <div class="form-group">
                        <label>D≈Çugo≈õƒá (mm)</label>
                        <input type="number" id="customLength" value="2500" min="0" onchange="calculate()">
                    </div>
                </div>
            </div>

            <!-- Parametry ciƒôcia -->
            <div class="card">
                <h2>‚öôÔ∏è Parametry Ciƒôcia</h2>
                
                <div class="form-group">
                    <label>Czas ciƒôcia</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="number" id="cuttingTime" value="1" min="0" step="0.1" onchange="calculate()" style="flex: 2;">
                        <select id="timeUnit" onchange="calculate()" style="flex: 1;">
                            <option value="h">godz</option>
                            <option value="min">min</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>D≈Çugo≈õƒá ciƒôcia (m) - opcjonalnie</label>
                    <input type="number" id="cuttingLength" value="0" min="0" step="0.1" onchange="calculate()">
                </div>

                <div class="form-group">
                    <label>Cena materia≈Çu (z≈Ç/kg)</label>
                    <input type="number" id="materialPrice" value="8.50" min="0" step="0.1" onchange="calculate()">
                    <div class="info-box">
                        Typowo: Stal wƒôglowa ~6-8 z≈Ç/kg, Nierdzewna ~15-25 z≈Ç/kg, Aluminium ~12-18 z≈Ç/kg
                    </div>
                </div>

                <div class="form-group">
                    <label>Typ gazu pomocniczego</label>
                    <select id="gasType" onchange="calculate()">
                        <option value="oxygen">Tlen (O‚ÇÇ)</option>
                        <option value="nitrogen">Azot (N‚ÇÇ)</option>
                        <option value="air">Sprƒô≈ºone powietrze</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Przep≈Çyw gazu (m¬≥/h)</label>
                    <input type="number" id="gasFlow" value="0.5" min="0" step="0.1" onchange="calculate()">
                </div>

                <div class="form-group">
                    <label>Cena gazu (z≈Ç/m¬≥)</label>
                    <input type="number" id="gasPrice" value="7.0" min="0" step="0.1" onchange="calculate()">
                </div>
            </div>

            <!-- Parametry maszyny i operatora -->
            <div class="card">
                <h2>‚ö° Maszyna i Operator</h2>
                
                <div class="form-group">
                    <label>Moc maszyny (kW)</label>
                    <input type="number" id="machinePower" value="4.0" min="0" step="0.1" onchange="calculate()">
                    <div class="info-box">
                        Typowa moc: 3.5-4.5 kW (laser + napƒôdy + ch≈Çodzenie)
                    </div>
                </div>

                <div class="form-group">
                    <label>Cena energii (z≈Ç/kWh)</label>
                    <input type="number" id="electricityPrice" value="1.55" min="0" step="0.01" onchange="calculate()">
                </div>

                <div class="form-group">
                    <label>Czas pracy operatora (h)</label>
                    <input type="number" id="operatorTime" value="1.5" min="0" step="0.1" onchange="calculate()">
                    <div class="info-box">
                        Zazwyczaj: czas ciƒôcia √ó 1.5 (przygotowanie + nadz√≥r + wy≈Çadunek)
                    </div>
                </div>

                <div class="form-group">
                    <label>Stawka operatora (z≈Ç/h)</label>
                    <input type="number" id="operatorRate" value="125" min="0" step="1" onchange="calculate()">
                    <div class="info-box">
                        Stawka 125 z≈Ç/h uwzglƒôdnia: koszty po≈õrednie (30% od R+S), zysk (15% od R+k(p)), S+k(p) (108,69 z≈Ç)
                    </div>
                </div>
            </div>

            <!-- Wyniki -->
            <div class="card">
                <h2>üìä Wyniki Kalkulacji</h2>
                
                <div class="result-item">
                    <span class="result-label">Materia≈Ç:</span>
                    <span class="result-value" id="resultMaterial">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Grubo≈õƒá:</span>
                    <span class="result-value" id="resultThickness">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Wymiar arkusza:</span>
                    <span class="result-value" id="resultSize">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Masa arkusza:</span>
                    <span class="result-value" id="resultMass">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Koszt materia≈Çu:</span>
                    <span class="result-value" id="resultMaterialCost">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Zu≈ºycie gazu:</span>
                    <span class="result-value" id="resultGasUsage">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Koszt gazu:</span>
                    <span class="result-value" id="resultGasCost">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Zu≈ºycie energii:</span>
                    <span class="result-value" id="resultEnergyUsage">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Koszt energii:</span>
                    <span class="result-value" id="resultEnergyCost">-</span>
                </div>

                <div class="result-item">
                    <span class="result-label">Koszt pracy operatora:</span>
                    <span class="result-value" id="resultOperatorCost">-</span>
                </div>

                <div class="result-item" id="costPerMeterRow" style="display: none;">
                    <span class="result-label">Koszt na metr bie≈ºƒÖcy:</span>
                    <span class="result-value" id="resultCostPerMeter">-</span>
                </div>

                <div class="total">
                    <h3>Ca≈Çkowity koszt us≈Çugi</h3>
                    <div class="amount" id="totalCost">0.00 z≈Ç</div>
                </div>
            </div>
        </div>

        <div class="buttons">
            <button class="btn" onclick="calculate()">üîÑ Przelicz</button>
            <button class="btn btn-secondary" onclick="resetForm()">‚Ü∫ Reset</button>
            <button class="btn btn-secondary" onclick="window.print()">üñ®Ô∏è Drukuj</button>
            <button class="btn btn-secondary" onclick="saveToFile()">üíæ Zapisz</button>
        </div>
    </div>

    <script>
        let currentMaterial = 'steel';

        // Predefiniowane parametry dla materia≈Ç√≥w
        const materialPresets = {
            steel: {
                name: 'Stal wƒôglowa',
                gasType: 'oxygen',
                density: 7.85, // kg/dm¬≥
                flowRanges: {
                    '0.5': 0.3, '0.8': 0.3, '1': 0.4, '1.5': 0.4, '2': 0.5,
                    '2.5': 0.6, '3': 0.7, '4': 0.8, '5': 0.8, '6': 0.8,
                    '8': 0.8, '10': 0.8
                }
            },
            stainless: {
                name: 'Stal nierdzewna',
                gasType: 'nitrogen',
                density: 7.90, // kg/dm¬≥
                flowRanges: {
                    '0.5': 0.5, '0.8': 0.6, '1': 0.8, '1.5': 1.0, '2': 1.2,
                    '2.5': 1.4, '3': 1.6, '4': 1.8, '5': 2.0, '6': 2.0,
                    '8': 2.0, '10': 2.0
                }
            },
            aluminum: {
                name: 'Aluminium',
                gasType: 'nitrogen',
                density: 2.70, // kg/dm¬≥
                flowRanges: {
                    '0.5': 0.5, '0.8': 0.6, '1': 0.7, '1.5': 0.9, '2': 1.0,
                    '2.5': 1.2, '3': 1.4, '4': 1.6, '5': 1.8, '6': 2.0,
                    '8': 2.0, '10': 2.0
                }
            }
        };

        function setMaterial(material) {
            currentMaterial = material;
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const preset = materialPresets[material];
            document.getElementById('gasType').value = preset.gasType;
            
            const thickness = document.getElementById('thickness').value;
            document.getElementById('gasFlow').value = preset.flowRanges[thickness] || 0.5;
            
            calculate();
        }

        document.getElementById('thickness').addEventListener('change', function() {
            const thickness = this.value;
            const preset = materialPresets[currentMaterial];
            document.getElementById('gasFlow').value = preset.flowRanges[thickness] || 0.5;
        });

        document.getElementById('sheetSize').addEventListener('change', function() {
            const customInputs = document.getElementById('customSizeInputs');
            customInputs.style.display = this.value === 'custom' ? 'block' : 'none';
            calculate();
        });

        function calculate() {
            // Pobierz warto≈õci
            let cuttingTimeH = parseFloat(document.getElementById('cuttingTime').value) || 0;
            const timeUnit = document.getElementById('timeUnit').value;
            if (timeUnit === 'min') {
                cuttingTimeH = cuttingTimeH / 60;
            }

            const gasFlow = parseFloat(document.getElementById('gasFlow').value) || 0;
            const gasPrice = parseFloat(document.getElementById('gasPrice').value) || 0;
            const machinePower = parseFloat(document.getElementById('machinePower').value) || 0;
            const electricityPrice = parseFloat(document.getElementById('electricityPrice').value) || 0;
            const operatorTime = parseFloat(document.getElementById('operatorTime').value) || 0;
            const operatorRate = parseFloat(document.getElementById('operatorRate').value) || 0;
            const cuttingLength = parseFloat(document.getElementById('cuttingLength').value) || 0;
            const materialPricePerKg = parseFloat(document.getElementById('materialPrice').value) || 0;

            // Oblicz masƒô arkusza
            const thickness = parseFloat(document.getElementById('thickness').value) || 0;
            const sheetSizeSelect = document.getElementById('sheetSize');
            let width, length;
            
            if (sheetSizeSelect.value === 'custom') {
                width = parseFloat(document.getElementById('customWidth').value) || 0;
                length = parseFloat(document.getElementById('customLength').value) || 0;
            } else {
                const dimensions = sheetSizeSelect.value.split('x');
                width = parseFloat(dimensions[0]) || 0;
                length = parseFloat(dimensions[1]) || 0;
            }

            // Masa = objƒôto≈õƒá (dm¬≥) √ó gƒôsto≈õƒá (kg/dm¬≥)
            // Objƒôto≈õƒá = (width_mm / 1000) √ó (length_mm / 1000) √ó (thickness_mm / 1000) √ó 1000000 dm¬≥
            const volumeDm3 = (width / 1000) * (length / 1000) * (thickness / 1000) * 1000;
            const density = materialPresets[currentMaterial].density;
            const sheetMass = volumeDm3 * density;
            const materialCost = sheetMass * materialPricePerKg;

            // Obliczenia
            const gasUsage = cuttingTimeH * gasFlow;
            const gasCost = gasUsage * gasPrice;
            const energyUsage = cuttingTimeH * machinePower;
            const energyCost = energyUsage * electricityPrice;
            const operatorCost = operatorTime * operatorRate;
            const totalCost = gasCost + energyCost + operatorCost + materialCost;

            // Materia≈Ç i wymiary
            const materialName = materialPresets[currentMaterial].name;
            let sheetSize = sheetSizeSelect.value;
            
            if (sheetSize === 'custom') {
                sheetSize = `${width} √ó ${length} mm`;
            } else {
                sheetSize = sheetSize.replace('x', ' √ó ') + ' mm';
            }

            // Wy≈õwietl wyniki
            document.getElementById('resultMaterial').textContent = materialName;
            document.getElementById('resultThickness').textContent = `${thickness} mm`;
            document.getElementById('resultSize').textContent = sheetSize;
            document.getElementById('resultMass').textContent = `${sheetMass.toFixed(2)} kg`;
            document.getElementById('resultMaterialCost').textContent = `${materialCost.toFixed(2)} z≈Ç`;
            document.getElementById('resultGasUsage').textContent = `${gasUsage.toFixed(3)} m¬≥`;
            document.getElementById('resultGasCost').textContent = `${gasCost.toFixed(2)} z≈Ç`;
            document.getElementById('resultEnergyUsage').textContent = `${energyUsage.toFixed(2)} kWh`;
            document.getElementById('resultEnergyCost').textContent = `${energyCost.toFixed(2)} z≈Ç`;
            document.getElementById('resultOperatorCost').textContent = `${operatorCost.toFixed(2)} z≈Ç`;
            document.getElementById('totalCost').textContent = `${totalCost.toFixed(2)} z≈Ç`;

            // Koszt na metr
            const costPerMeterRow = document.getElementById('costPerMeterRow');
            if (cuttingLength > 0) {
                const costPerMeter = totalCost / cuttingLength;
                document.getElementById('resultCostPerMeter').textContent = `${costPerMeter.toFixed(2)} z≈Ç/m`;
                costPerMeterRow.style.display = 'flex';
            } else {
                costPerMeterRow.style.display = 'none';
            }
        }

        function resetForm() {
            document.getElementById('cuttingTime').value = 1;
            document.getElementById('timeUnit').value = 'h';
            document.getElementById('gasFlow').value = 0.5;
            document.getElementById('gasPrice').value = 7.0;
            document.getElementById('machinePower').value = 4.0;
            document.getElementById('electricityPrice').value = 1.55;
            document.getElementById('operatorTime').value = 1.5;
            document.getElementById('operatorRate').value = 125;
            document.getElementById('cuttingLength').value = 0;
            document.getElementById('materialPrice').value = 8.50;
            document.getElementById('thickness').value = 2;
            document.getElementById('sheetSize').value = '1250x2500';
            document.getElementById('gasType').value = 'oxygen';
            setMaterial('steel');
            calculate();
        }

        function saveToFile() {
            const data = {
                material: currentMaterial,
                materialName: materialPresets[currentMaterial].name,
                thickness: document.getElementById('thickness').value,
                sheetSize: document.getElementById('sheetSize').value,
                cuttingTime: document.getElementById('cuttingTime').value,
                timeUnit: document.getElementById('timeUnit').value,
                gasType: document.getElementById('gasType').value,
                gasFlow: document.getElementById('gasFlow').value,
                gasPrice: document.getElementById('gasPrice').value,
                machinePower: document.getElementById('machinePower').value,
                electricityPrice: document.getElementById('electricityPrice').value,
                operatorTime: document.getElementById('operatorTime').value,
                operatorRate: document.getElementById('operatorRate').value,
                cuttingLength: document.getElementById('cuttingLength').value,
                materialPrice: document.getElementById('materialPrice').value,
                sheetMass: document.getElementById('resultMass').textContent,
                materialCost: document.getElementById('resultMaterialCost').textContent,
                totalCost: document.getElementById('totalCost').textContent,
                date: new Date().toLocaleString('pl-PL')
            };

            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `wycena_ciecia_${Date.now()}.json`;
            link.click();
        }

        // Inicjalizacja
        calculate();
    </script>
</body>
</html>
